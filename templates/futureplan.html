{% extends 'Header.html' %}

{% load static %}
<!DOCTYPE html>
<html lang="en">
{% block content %}
<head>
    <meta charset="UTF-8">
    <title>Profile</title>
    <link rel="stylesheet" href="{% static 'futureplan.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body>
    <div class="header-container">
        <h1>4 Year Plan - Plan {{plan_num}} </h1>
        <div class="credits-container1">
            <h3> Credits in Plan: {{total_credits}} / 120 </h3>
        </div>
    </div>
    <div class="credits-container2">
        <h3> Completed Credits: {{completed_credits}} / 120 </h3>
    </div>
    <div class="container">
        {% for semester_num, course_list in courses_by_semester %}
                <div class="box">
                    <div class="semester-name">
                        <b>
                    {% if semester_num == 's1' %}
                        Freshman Fall
                    {% elif semester_num == 's2' %}
                        Freshman Spring
                    {% elif semester_num == 's3' %}
                        Sophomore Fall
                    {% elif semester_num == 's4' %}
                        Sophomore Spring
                    {% elif semester_num == 's5' %}
                        Junior Fall
                    {% elif semester_num == 's6' %}
                        Junior Spring
                    {% elif semester_num == 's7' %}
                        Senior Fall
                    {% elif semester_num == 's8' %}
                        Senior Spring
                    {% endif %}
                    </b>
                </div>
                    </div>
                    {% if course_list %}
                        {% for course_tuple in course_list %}
                        <div style="display: flex; flex-direction: column-reverse;">                            
                            <div class="course-rectangle">
                                <span class="course-number">{{ course_tuple.1 }}</span>
                                <form class="remove-form d-flex flex-column align-items-center" method="post" action="{% url 'Plan:remove_course' %}">                                    {% csrf_token %}
                                    <input type="hidden" name="plan_id" value="{{ plan_id }}">
                                    <input type="hidden" name="plan_num" value="{{ plan_num }}">
                                    <input type="hidden" name="semester_num" value="{{ semester_num }}">
                                    <input type="hidden" name="course_id" value="{{ course_tuple.0 }}">
                                    <button type="submit" class="btn btn-link"><i class="bi bi-trash"></i></button>
                                </form>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                            <p>No courses planned for this semester</p>
                    {% endif %}
                </div>
        {% endfor %}
    </div>
    {% if is_valid %}
    <div class="text">
        <p><span style="color: green; font-weight: bold;">Your plan meets the {{ student.major }} requirements.</span></p>

    </div>
    {% else %}
    <div class="text">
        <p><span style="color: #931C22; font-weight:bold;">Your plan does not meet the {{ student.major }} requirements. Please review and make necessary adjustments.</span></p>
        {% for error in errormessages %}
                <p><span style="color: #931C22;">- {{ error }}</span></p>
        {% endfor %}
    </div>
    {% endif %}

    {% if is_valid2 %}
    <div class="text">
        <p><span style="color: green; font-weight: bold;">Your plan meets the {{ student.major2 }} requirements.</span></p>

    </div>
    {% else %}
    <div class="text">
        <p><span style="color: #931C22; font-weight:bold;">Your plan does not meet the {{ student.major2 }} requirements. Please review and make necessary adjustments.</span></p>
        {% for error in errormessages2 %}
                <p><span style="color: #931C22;">- {{ error }}</span></p>
        {% endfor %}
    </div>
    {% endif %}

    {% if is_valid3 %}
    <div class="text">
        <p><span style="color: green; font-weight: bold;">Your plan meets the university requirements.</span></p>

    </div>
    {% else %}
    <div class="text">
        <p><span style="color: #931C22; font-weight:bold;">Your plan does not meet the university requirements. Please review and make necessary adjustments.</span></p>
        {% for error in errormessages3 %}
                <p><span style="color: #931C22;">- {{ error }}</span></p>
        {% endfor %}
    </div>
    {% endif %}



    {% if prereq_conflict %}
    <div class="text">
        <p>Prerequisite conflict found with {{ prereq_conflict }}.</p>
    </div>  
    {% else %}
    <div class="text">
        <p>No prerequisite issues found.</p>
    </div>
    {% endif %}
    <a href="{% url 'Plan:course_list' plan_id=plan_id plan_num=plan_num %}" class="courses-button" >Add/Edit Courses</a>
    <a href="{% url 'Plan:reqs_list' %}" class="requirements-button">View Requirements</a>
</body>
</html>
{% endblock %}
